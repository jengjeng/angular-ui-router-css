/*! angular-ui-router-css 0.0.0 | Build 2015 */!function(a,b,c,d,e,f,g){function h(b,c,d,e){c.promises=[],c.removedLinks=[],c.deferred=d.defer(),c.deferred.promise.then(function(){o("CSS load success")});var f=e.css,g=[].slice.apply(b.children("link[ui-router-css]")),h=[];g.forEach(function(b){var d=a.element(b).attr("href");-1===f.indexOf(d)&&(c.removedLinks.push(b),o("RemovedCss",d)),h.push(d)});var i=[],k=[];f.forEach(function(c){if(-1===h.indexOf(c)){var e=d.defer(),f=a.element('<link rel="stylesheet" href="'+c+'" ui-router-css />');j(f[0],function(){o("DOM's load event",f[0].href),e.resolve()}),i.push(e.promise),k.push(f),b.append(f),o("AddedCss",c)}}),d.all(i).then(function(){c.deferred.resolve()},function(){c.removedLinks.forEach(function(a){o("rollback removed css",a[0].href),b.append(a)}),k.forEach(function(a){o("rollback added css",a[0].href),a.remove()})})}function i(a,b){b.removedLinks.forEach(function(a){a.remove()})}function j(a,b){a.addEventListener?a.addEventListener("load",b,!1):a.onload=b}function k(a){a.resolve=a.resolve||{},a.resolve[d]=["$q","$http","$rootScope","$state","$uiRouterCss",function(a,b,c,d,e){return e.deferred.promise}]}function l(a,b,c){var d=m(b);d.pop();var e=a[d.join(g)],f=n((e&&e.css||[]).concat(c.css));a[b]={name:b,css:f}}function m(a){return a.split(g)}function n(a){for(var b={},c=[],d=0,e=a.length;e>d;++d)b.hasOwnProperty(a[d])||(c.push(a[d]),b[a[d]]=1);return c}function o(a,c){b&&console.log(a,c)}a.module(c,["ui.router"]).provider("$uiRouterCss",["$stateProvider",function(a){var b=a.state,c={};a.state=function(a,d){return a&&d&&d.css&&(d.css=Array.isArray(d.css)?d.css:[d.css],k(d),l(c,a,d)),b.apply(this,arguments)},this.$get=[function(){return{fromState:null,toState:null,getStateDefine:function(a){return a?c[a]:c},css:[],promises:[],deferred:null,removedLinks:[]}}]}]).directive("head",["$rootScope","$compile","$state","$interpolate","$uiRouterCss","$q",function(a,b,c,d,e,f){return{restrict:"E",link:function(b,c){a.$on("$stateChangeStart",function(a,b,d,g){e.fromState=g,e.toState=b,h(c,e,f,e.getStateDefine(b.name)),k(b)}),a.$on("$stateChangeSuccess",function(a,b){e.css=e.getStateDefine(b.name).css,i(c,e),o("css change to",e.css)})}}}])}(angular,!1,"ui.router.css","angular-ui-router-css","__uiRouterCss","__config",".");