/*! angular-ui-router-css 0.0.1 | Build 2015 */!function(a,b,c,d,e,f,g,h){function i(b,c,d,e){c.promises=[],c.removedLinks=[],c.deferred=d.defer(),c.deferred.promise.then(function(){p("CSS load success")});var f=e.css,g=[].slice.apply(b.children("link[ui-router-css]")),h=[];g.forEach(function(b){var d=a.element(b).attr("href");-1===f.indexOf(d)&&(c.removedLinks.push(b),p("RemovedCss",d)),h.push(d)});var i=[],j=[];f.forEach(function(c){if(-1===h.indexOf(c)){var e=d.defer(),f=a.element('<link rel="stylesheet" href="'+c+'" ui-router-css />');k(f[0],function(){p("DOM's load event",f[0].href),e.resolve()}),i.push(e.promise),j.push(f),b.append(f),p("AddedCss",c)}}),d.all(i).then(function(){c.deferred.resolve()},function(){c.removedLinks.forEach(function(a){p("rollback removed css",a[0].href),b.append(a)}),j.forEach(function(a){p("rollback added css",a[0].href),a.remove()})})}function j(a,b){b.removedLinks.forEach(function(a){a.remove()})}function k(a,b){a.addEventListener?a.addEventListener("load",b,!1):a.onload=b}function l(a){a.resolve=a.resolve||{},a.resolve[d]=["$q","$http","$rootScope","$state","$uiRouterCss",function(a,b,c,d,e){return e.deferred.promise}]}function m(a,b,c){var d=n(b);d.pop();var e=a[d.join(g)],f=o((e&&e.css||[]).concat(c.css));a[b]={name:b,css:f}}function n(a){return a.split(g)}function o(a){for(var b={},c=[],d=0,e=a.length;e>d;++d)b.hasOwnProperty(a[d])||(c.push(a[d]),b[a[d]]=1);return c}function p(a,c){b&&console.log(a,c)}a.module(c,["ui.router"]).provider("$uiRouterCss",["$stateProvider",function(a){var b=a.state,c={};a.state=function(a,d){return a&&d&&(d.css=d.css===h?[]:d.css,d.css=Array.isArray(d.css)?d.css:[d.css],l(d),m(c,a,d)),b.apply(this,arguments)},this.$get=[function(){return{fromState:null,toState:null,getStateDefine:function(a){return a?c[a]:c},css:[],promises:[],deferred:null,removedLinks:[]}}]}]).directive("head",["$rootScope","$compile","$state","$interpolate","$uiRouterCss","$q",function(a,b,c,d,e,f){return{restrict:"E",link:function(b,c){a.$on("$stateChangeStart",function(a,b,d,g){e.fromState=g,e.toState=b,i(c,e,f,e.getStateDefine(b.name)),l(b)}),a.$on("$stateChangeSuccess",function(a,b){e.css=e.getStateDefine(b.name).css,j(c,e),p("css change to",e.css)})}}}])}(angular,!1,"ui.router.css","angular-ui-router-css","__uiRouterCss","__config",".");